{"version":3,"file":"index.js","names":["chatCodes: number[]","node: TaroNode","el: TaroElement","node: TaroElement | null","type: string","key: string","ctor: Ctor","methodName: string","options: TFunc | Record<string, any>","getComponentsAlias","value: number"],"sources":["../../src/utils/index.ts"],"sourcesContent":["import {\n  getComponentsAlias as _getComponentsAlias,\n  internalComponents,\n  isFunction,\n  Shortcuts\n} from '@tarojs/shared'\n\nimport {\n  CLASS,\n  COMMENT,\n  ID,\n  ROOT_STR,\n  STYLE,\n  UID\n} from '../constants'\nimport { NodeType } from '../dom/node_types'\n\nimport type { TaroElement } from '../dom/element'\nimport type { TaroNode } from '../dom/node'\nimport type { TaroText } from '../dom/text'\nimport type { TFunc } from '../interface'\n\nexport const incrementId = () => {\n  const chatCodes: number[] = []\n  // A-Z\n  for (let i = 65; i <= 90; i++) {\n    chatCodes.push(i)\n  }\n  // a-z\n  for (let i = 97; i <= 122; i++) {\n    chatCodes.push(i)\n  }\n  const chatCodesLen = chatCodes.length - 1\n  const list = [0, 0]\n  return () => {\n    const target = list.map(item => chatCodes[item])\n    const res = String.fromCharCode(...target)\n\n    let tailIdx = list.length - 1\n\n    list[tailIdx]++\n\n    while (list[tailIdx] > chatCodesLen) {\n      list[tailIdx] = 0\n      tailIdx = tailIdx - 1\n      if (tailIdx < 0) {\n        list.push(0)\n        break\n      }\n      list[tailIdx]++\n    }\n\n    return res\n  }\n}\n\nexport function isElement (node: TaroNode): node is TaroElement {\n  return node.nodeType === NodeType.ELEMENT_NODE\n}\n\nexport function isText (node: TaroNode): node is TaroText {\n  return node.nodeType === NodeType.TEXT_NODE\n}\n\nexport function isComment (node: TaroNode): boolean {\n  return node.nodeName === COMMENT\n}\n\nexport function isHasExtractProp (el: TaroElement): boolean {\n  const res = Object.keys(el.props).find(prop => {\n    return !(/^(class|style|id)$/.test(prop) || prop.startsWith('data-'))\n  })\n  return Boolean(res)\n}\n\n/**\n * 往上寻找组件树直到 root，寻找是否有祖先组件绑定了同类型的事件\n * @param node 当前组件\n * @param type 事件类型\n */\nexport function isParentBinded (node: TaroElement | null, type: string): boolean {\n  while ((node = node?.parentElement || null)) {\n    if (!node || node.nodeName === ROOT_STR || node.nodeName === 'root-portal') {\n      return false\n    } else if (node.__handlers[type]?.length) {\n      return true\n    }\n  }\n\n  return false\n}\n\nexport function shortcutAttr (key: string): string {\n  switch (key) {\n    case STYLE:\n      return Shortcuts.Style\n    case ID:\n      return UID\n    case CLASS:\n      return Shortcuts.Class\n    default:\n      return key\n  }\n}\n\nexport const customWrapperCache = new Map<string, Record<string, any>>()\n\ninterface Ctor {\n  new (...args: any[]): any\n}\n\nexport function extend (ctor: Ctor, methodName: string, options: TFunc | Record<string, any>) {\n  if (isFunction(options)) {\n    options = {\n      value: options\n    }\n  }\n  Object.defineProperty(ctor.prototype, methodName, {\n    configurable: true,\n    enumerable: true,\n    ...options\n  })\n}\n\nlet componentsAlias\nexport function getComponentsAlias () {\n  if (!componentsAlias) {\n    componentsAlias = _getComponentsAlias(internalComponents)\n  }\n  return componentsAlias\n}\n\nexport function convertNumber2PX (value: number) {\n  return value + 'px'\n}\n\nexport * from './lodash'\nexport * from './router'\n"],"mappings":";;;;;;;AAsBA,MAAa,cAAc,MAAM;CAC/B,MAAMA,YAAsB,CAAE;AAE9B,MAAK,IAAI,IAAI,IAAI,KAAK,IAAI,KAAK;AAC7B,YAAU,KAAK,EAAE;CAClB;AAED,MAAK,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK;AAC9B,YAAU,KAAK,EAAE;CAClB;CACD,MAAM,eAAe,UAAU,SAAS;CACxC,MAAM,OAAO,CAAC,GAAG,CAAE;AACnB,QAAO,MAAM;EACX,MAAM,SAAS,KAAK,IAAI,UAAQ,UAAU,MAAM;EAChD,MAAM,MAAM,OAAO,aAAa,GAAG,OAAO;EAE1C,IAAI,UAAU,KAAK,SAAS;AAE5B,OAAK;AAEL,SAAO,KAAK,WAAW,cAAc;AACnC,QAAK,WAAW;AAChB,aAAU,UAAU;AACpB,OAAI,UAAU,GAAG;AACf,SAAK,KAAK,EAAE;AACZ;GACD;AACD,QAAK;EACN;AAED,SAAO;CACR;AACF;AAED,SAAgB,UAAWC,MAAqC;AAC9D,QAAO,KAAK,aAAa,SAAS;AACnC;AAED,SAAgB,OAAQA,MAAkC;AACxD,QAAO,KAAK,aAAa,SAAS;AACnC;AAED,SAAgB,UAAWA,MAAyB;AAClD,QAAO,KAAK,aAAa;AAC1B;AAED,SAAgB,iBAAkBC,IAA0B;CAC1D,MAAM,MAAM,OAAO,KAAK,GAAG,MAAM,CAAC,KAAK,UAAQ;AAC7C,WAAS,qBAAqB,KAAK,KAAK,IAAI,KAAK,WAAW,QAAQ;CACrE,EAAC;AACF,QAAO,QAAQ,IAAI;AACpB;;;;;;AAOD,SAAgB,eAAgBC,MAA0BC,MAAuB;AAC/E,QAAQ,OAAO,MAAM,iBAAiB,MAAO;AAC3C,OAAK,QAAQ,KAAK,aAAa,YAAY,KAAK,aAAa,eAAe;AAC1E,UAAO;EACR,WAAU,KAAK,WAAW,OAAO,QAAQ;AACxC,UAAO;EACR;CACF;AAED,QAAO;AACR;AAED,SAAgB,aAAcC,KAAqB;AACjD,SAAQ,KAAR;EACE,KAAK,MACH,QAAO,UAAU;EACnB,KAAK,GACH,QAAO;EACT,KAAK,MACH,QAAO,UAAU;EACnB,QACE,QAAO;CACV;AACF;AAED,MAAa,qBAAqB,IAAI;AAMtC,SAAgB,OAAQC,MAAYC,YAAoBC,SAAsC;AAC5F,KAAI,WAAW,QAAQ,EAAE;AACvB,YAAU,EACR,OAAO,QACR;CACF;AACD,QAAO,eAAe,KAAK,WAAW,YAAY;EAChD,cAAc;EACd,YAAY;EACZ,GAAG;CACJ,EAAC;AACH;AAED,IAAI;AACJ,SAAgBC,uBAAsB;AACpC,MAAK,iBAAiB;AACpB,oBAAkB,mBAAoB,mBAAmB;CAC1D;AACD,QAAO;AACR;AAED,SAAgB,iBAAkBC,OAAe;AAC/C,QAAO,QAAQ;AAChB"}