{"version":3,"file":"raf.js","names":["now: () => number"],"sources":["../../src/bom/raf.ts"],"sourcesContent":["// https://github.com/myrne/performance-now\nexport let now: () => number\n\n(function () {\n  let loadTime\n  if ((typeof performance !== 'undefined' && performance !== null) && performance.now) {\n    now = () => performance.now()\n  } else if (Date.now) {\n    loadTime = Date.now()\n    now = () => Date.now() - loadTime\n  } else {\n    loadTime = new Date().getTime()\n    now = () => new Date().getTime() - loadTime\n  }\n})()\n\nlet lastTime = 0\n\n// https://gist.github.com/paulirish/1579671\n// https://gist.github.com/jalbam/5fe05443270fa6d8136238ec72accbc0\nconst _raf = process.env.TARO_PLATFORM === 'web' ? requestAnimationFrame : function (callback) {\n  const _now = now()\n  const nextTime = Math.max(lastTime + 16, _now) // First time will execute it immediately but barely noticeable and performance is gained.\n  return setTimeout(function () { callback(lastTime = nextTime) }, nextTime - _now)\n}\n\nconst _caf = process.env.TARO_PLATFORM === 'web'\n  ? cancelAnimationFrame\n  : function (seed) {\n    // fix https://github.com/NervJS/taro/issues/7749\n    clearTimeout(seed)\n  }\n\nexport {\n  _caf as caf,\n  _raf as raf\n}\n"],"mappings":";AACA,IAAWA;AAEX,CAAC,WAAY;CACX,IAAI;AACJ,YAAY,gBAAgB,eAAe,gBAAgB,QAAS,YAAY,KAAK;AACnF,QAAM,MAAM,YAAY,KAAK;CAC9B,WAAU,KAAK,KAAK;AACnB,aAAW,KAAK,KAAK;AACrB,QAAM,MAAM,KAAK,KAAK,GAAG;CAC1B,OAAM;AACL,aAAW,IAAI,OAAO,SAAS;AAC/B,QAAM,MAAM,IAAI,OAAO,SAAS,GAAG;CACpC;AACF,IAAG;AAEJ,IAAI,WAAW;AAIf,MAAM,OAAO,QAAQ,IAAI,kBAAkB,QAAQ,wBAAwB,SAAU,UAAU;CAC7F,MAAM,OAAO,KAAK;CAClB,MAAM,WAAW,KAAK,IAAI,WAAW,IAAI,KAAK;AAC9C,QAAO,WAAW,WAAY;AAAE,WAAS,WAAW,SAAS;CAAE,GAAE,WAAW,KAAK;AAClF;AAED,MAAM,OAAO,QAAQ,IAAI,kBAAkB,QACvC,uBACA,SAAU,MAAM;AAEhB,cAAa,KAAK;AACnB"}