{"version":3,"file":"perf.js","names":["id: string","#parseTime","cb?: TFunc","time: number"],"sources":["../src/perf.ts"],"sourcesContent":["import { options } from './options'\nimport { debounce } from './utils'\n\nimport type { TFunc } from './interface'\n\nclass Performance {\n  private recorder = new Map<string, number>()\n\n  public start (id: string) {\n    if (!options.debug) {\n      return\n    }\n    this.recorder.set(id, Date.now())\n  }\n\n  public stop (id: string, now = Date.now()) {\n    if (!options.debug) {\n      return\n    }\n    const prev = this.recorder.get(id)!\n    if (!(prev >= 0)) return\n\n    this.recorder.delete(id)\n    const time = now - prev\n    // eslint-disable-next-line no-console\n    console.log(`${id} 时长： ${time}ms 开始时间：${this.#parseTime(prev)} 结束时间：${this.#parseTime(now)}`)\n  }\n\n  public delayStop (id: string, delay = 500) {\n    if (!options.debug) {\n      return\n    }\n\n    return debounce((now = Date.now(), cb?: TFunc) => {\n      this.stop(id, now)\n      cb?.()\n    }, delay)\n  }\n\n  #parseTime (time: number) {\n    const d = new Date(time)\n    return `${d.getHours()}:${d.getMinutes()}:${d.getSeconds()}.${`${d.getMilliseconds()}`.padStart(3, '0')}`\n  }\n}\n\nexport const perf = new Performance()\n"],"mappings":";;;;AAKA,IAAM,cAAN,MAAkB;CAChB,AAAQ,WAAW,IAAI;CAEvB,AAAO,MAAOA,IAAY;AACxB,OAAK,QAAQ,MACX;AAEF,OAAK,SAAS,IAAI,IAAI,KAAK,KAAK,CAAC;CAClC;CAED,AAAO,KAAMA,IAAY,MAAM,KAAK,KAAK,EAAE;AACzC,OAAK,QAAQ,MACX;EAEF,MAAM,OAAO,KAAK,SAAS,IAAI,GAAG;AAClC,QAAM,QAAQ,GAAI;AAElB,OAAK,SAAS,OAAO,GAAG;EACxB,MAAM,OAAO,MAAM;AAEnB,UAAQ,KAAK,EAAE,GAAG,OAAO,KAAK,UAAU,KAAKC,WAAW,KAAK,CAAC,QAAQ,KAAKA,WAAW,IAAI,CAAC,EAAE;CAC9F;CAED,AAAO,UAAWD,IAAY,QAAQ,KAAK;AACzC,OAAK,QAAQ,MACX;AAGF,SAAO,SAAS,CAAC,MAAM,KAAK,KAAK,EAAEE,OAAe;AAChD,QAAK,KAAK,IAAI,IAAI;AAClB,SAAM;EACP,GAAE,MAAM;CACV;CAED,WAAYC,MAAc;EACxB,MAAM,IAAI,IAAI,KAAK;AACnB,UAAQ,EAAE,EAAE,UAAU,CAAC,GAAG,EAAE,YAAY,CAAC,GAAG,EAAE,YAAY,CAAC,GAAG,CAAC,EAAE,EAAE,iBAAiB,CAAC,EAAE,SAAS,GAAG,IAAI,CAAC;CACzG;AACF;AAED,MAAa,OAAO,IAAI"}